<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recetario Delicioso</title>

    <!-- PWA & Meta -->
    <meta name="theme-color" content="#78350f" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Recetario" />
    <link
      rel="apple-touch-icon"
      href="https://placehold.co/192x192/78350f/ffffff?text=R"
    />
    <link rel="manifest" href="/manifest.json" />

    <!-- Tailwind → modo oscuro sólo por clase -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: "class" };
    </script>

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:wght@500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos base (recortados) -->
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f7f5;
      }
      body.dark {
        background-color: #1c1917;
      }
      h1,
      h2,
      h3,
      h4 {
        font-family: "Lora", serif;
      }
      /* 🔹 Botones de filtros y categorías */
      .category-btn.active,
      .filter-btn.active,
      .time-filter-btn.active {
        background-color: #78350f;
        color: #fff;
        font-weight: 600;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }
      .dark .category-btn.active,
      .dark .filter-btn.active,
      .dark .time-filter-btn.active {
        background-color: #f59e0b;
        color: #1c1917;
      }
      .category-btn,
      .filter-btn,
      .time-filter-btn {
        transition: all 0.3s ease-in-out;
        padding: 0.6rem 1rem;
        border-radius: 9999px;
        border: 1px solid transparent;
        font-size: 0.875rem;
      }
      .category-btn:hover:not(.active),
      .filter-btn:hover:not(.active),
      .time-filter-btn:hover:not(.active) {
        background-color: #f0ead6;
        box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05);
      }
      .dark .category-btn:hover:not(.active),
      .dark .filter-btn:hover:not(.active),
      .dark .time-filter-btn:hover:not(.active) {
        background-color: #3b3735;
      }
      /* 🔹 Grids / tarjetas */
      #categoryFilters,
      #timeFilters {
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        padding-bottom: 0.5rem;
      }
      #categoryFilters::-webkit-scrollbar,
      #timeFilters::-webkit-scrollbar {
        display: none;
      }
      .recipe-card > div {
        border-radius: 1.25rem;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease-in-out;
      }
      .recipe-card > div:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
      }
      .recipe-card img.recipe-image {
        width: 100%;
        height: 192px;
        object-fit: cover;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
      }
    </style>
  </head>

  <body class="dark:bg-stone-900 dark:text-stone-200">
    <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <header class="relative text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-amber-900 dark:text-amber-500">
          Recetario Delicioso
        </h1>
        <p class="text-gray-600 dark:text-stone-400 mt-2">
          150 recetas para inspirar tu cocina.
        </p>
        <div id="user-info" class="text-xs text-gray-400 mt-2"></div>
        <div class="absolute top-0 left-0">
          <!-- 🔀 Tema claro/oscuro -->
          <button
            id="theme-toggle"
            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-stone-700 focus:outline-none"
          ></button>
        </div>
      </header>

      <!-- Zona resultados / grid -->
      <div id="no-results" class="hidden text-center py-12">
        <p class="text-gray-600 dark:text-stone-400">
          No se encontraron recetas. ¡Intenta otra búsqueda o filtro!
        </p>
      </div>
      <div
        id="recipeGrid"
        class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6 mt-8"
      ></div>
    </div>

    <!-- ========== SCRIPTS PRINCIPALES ========== -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBnYukeJLJHs9lLNpnGYHRZ58SVE3CpTBQ",
        authDomain: "lucid-copilot-454618-k7.firebaseapp.com",
        projectId: "lucid-copilot-454618-k7",
        storageBucket: "lucid-copilot-454618-k7.appspot.com",
        messagingSenderId: "948763528254",
        appId: "1:948763528254:web:3eba3d724edf844528956f",
        measurementId: "G-256GP1S7YX",
      };
      const app = initializeApp(firebaseConfig);
      getAnalytics(app);

      /* ---------------- DATA ---------------- */
      const allRecipes = [
        {
          categoria: "Aperitivo",
          titulo: "Brochetas de aceituna y pimiento",
          raciones: 4,
          tiempo: "15 min",
          imagen:
            "https://placehold.co/800x600/d1c4b5/4a2e0a?text=Brochetas+Aceituna",
          ingredientes: [
            "Aceitunas verdes y negras",
            "Pimiento rojo troceado",
            "Hojas de albahaca",
            "Aceite de oliva",
            "Pimienta negra",
          ],
          pasos: [
            "Ensarta aceitunas, pimiento y albahaca en palillos.",
            "Aliña con aceite y pimienta.",
            "Sirve frío.",
          ],
        },
        /* 👉 Pega aquí el resto de las 149 recetas */
      ];

      // 🔗 exponemos los datos para el script de diagnóstico
      window.allRecipes = allRecipes;

      /* ——— Resto de tu JS (renderizado, filtros, etc.) ——— */
    </script>

    <!-- === DIAGNÓSTICO DE FOTOS FALTANTES — elimina cuando termines === -->
    <script>
      window.addEventListener("load", () => {
        const data = window.allRecipes || [];
        const sinFoto = data.filter(
          (r) =>
            !r.imagen ||
            r.imagen.trim() === "" ||
            r.imagen.includes("placehold.co") ||
            r.imagen.includes("image_generation_content/0")
        );

        const box = document.createElement("div");
        box.style.cssText = `
          position: fixed;
          bottom: 1rem;
          right: 1rem;
          max-height: 60vh;
          overflow: auto;
          background: #fff;
          color: #000;
          font: 14px/1.4 sans-serif;
          border: 2px solid #f59e0b;
          border-radius: 8px;
          padding: 12px 16px;
          z-index: 9999;
          box-shadow: 0 6px 12px rgba(0,0,0,.2);
          white-space: pre;
        `;
        box.innerText =
          sinFoto.length === 0
            ? "✅ Todas las recetas tienen imagen."
            : `⚠️  Faltan ${sinFoto.length} imágenes\n\n` +
              sinFoto.map((r) => `• ${r.categoria} – ${r.titulo}`).join("\n");

        const close = document.createElement("button");
        close.textContent = "×";
        close.style.cssText =
          "position:absolute;top:4px;right:6px;border:none;background:none;font-size:20px;cursor:pointer";
        close.onclick = () => box.remove();
        box.appendChild(close);

        document.body.appendChild(box);
      });
    </script>
    <!-- === FIN DIAGNÓSTICO === -->
  </body>
</html>
