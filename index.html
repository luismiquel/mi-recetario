<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Recetario Espa√±ol con 173 recetas. B√∫squeda r√°pida, voz, modo guiado, accesibilidad y lista de la compra." />
  <title>Recetario Espa√±ol ‚Äì 173 recetas</title>
  
  <link rel="stylesheet" href="./styles.css">
  <style>
    :root{ --base-font:16px; } html{ font-size: var(--base-font); } body{ -webkit-tap-highlight-color: transparent; }
    /* (Aqu√≠ van todos tus estilos CSS originales) */
  </style>
</head>
<body class="dark:bg-stone-900 dark:text-stone-200">
  
  <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4" id="app">
    </div>

  <script src="./recetas.js"></script>
  <script>
    // --- L√ìGICA DE LA APLICACI√ìN CORREGIDA ---
    
    function photoFallback(title) {
        const texto = encodeURIComponent(title.replace(/\s/g, '+'));
        return `https://via.placeholder.com/800x500/cccccc/808080?text=${texto}`;
    }

    const state = { /* ... tu objeto state ... */ };
    const $ = id => document.getElementById(id);
    const els = { /* ... tu objeto els ... */ };
    
    function card(r, i) {
        const star = isFav(r) ? '‚≠ê' : '‚òÜ';
        const imagenSrc = `imagenes/${slug(r.titulo)}.jpg`;

        return `<article class="card" role="article" aria-label="${r.titulo}">
            <img src="${imagenSrc}" alt="Foto de ${r.titulo}" onerror="this.onerror=null; this.src='${photoFallback(r.titulo)}';" class="w-full h-44 sm:h-48 object-cover" loading="lazy">
            <div class="p-3">
                <h3 class="text-lg font-semibold">${r.titulo}</h3>
                <p class="text-sm text-stone-600 dark:text-stone-400">${r.categoria} ¬∑ ${r.tiempo}</p>
                <div class="flex flex-wrap gap-2 pt-1">
                    <button class="btn btn-primary" data-a="abrir" data-i="${i}" title="Abrir receta">üìñ Abrir</button>
                    </div>
            </div>
        </article>`;
    }

    function openDetail(r) {
        state.current = r;
        els.detailTitle.textContent = r.titulo;
        els.detailMeta.textContent = `${r.categoria} ¬∑ ${r.tiempo}`;
        els.detailIngredients.innerHTML = r.ingredientes.map(i=>`<li>${i}</li>`).join("");
        els.detailSteps.innerHTML = r.pasos.map(p=>`<li>${p}</li>`).join("");
        
        const imagenSrc = `imagenes/${slug(r.titulo)}.jpg`;
        els.detailImg.src = imagenSrc;
        els.detailImg.onerror = () => { els.detailImg.src = photoFallback(r.titulo); };
        
        els.detailModal.classList.remove('hidden');
    }

    // El resto de tu c√≥digo JavaScript avanzado (voz, filtros, etc.) va aqu√≠.
    // Aseg√∫rate de que no haya funciones como 'build' o 'ingredientesPara',
    // ya que ahora los datos vienen directamente de 'recetas.js'.
  </script>
</body>
</html>
